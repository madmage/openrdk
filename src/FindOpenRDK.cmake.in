MESSAGE(STATUS "Including CMake include file for external builts")

EXECUTE_PROCESS(COMMAND rdk-config --libs             OUTPUT_VARIABLE RDKCORE_LDFLAGS          OUTPUT_STRIP_TRAILING_WHITESPACE)
EXECUTE_PROCESS(COMMAND rdk-config --cflags           OUTPUT_VARIABLE RDKCORE_CXXFLAGS         OUTPUT_STRIP_TRAILING_WHITESPACE)
EXECUTE_PROCESS(COMMAND rdk-config --libraries        OUTPUT_VARIABLE RDKCORE_LIBRARIES        OUTPUT_STRIP_TRAILING_WHITESPACE)
EXECUTE_PROCESS(COMMAND rdk-config --include-dir      OUTPUT_VARIABLE RDKCORE_INCLUDE_DIR      OUTPUT_STRIP_TRAILING_WHITESPACE)
EXECUTE_PROCESS(COMMAND rdk-config --link-directories OUTPUT_VARIABLE RDKCORE_LINK_DIRECTORIES OUTPUT_STRIP_TRAILING_WHITESPACE)
EXECUTE_PROCESS(COMMAND rdk-config --definitions OUTPUT_VARIABLE RDKCORE_DEFINITIONS OUTPUT_STRIP_TRAILING_WHITESPACE)
EXECUTE_PROCESS(COMMAND rdk-config --root             OUTPUT_VARIABLE OpenRDK_ROOT             OUTPUT_STRIP_TRAILING_WHITESPACE)
EXECUTE_PROCESS(COMMAND rdk-config --output           OUTPUT_VARIABLE OpenRDK_OUTPUT_TREE      OUTPUT_STRIP_TRAILING_WHITESPACE)
EXECUTE_PROCESS(COMMAND rdk-config --version          OUTPUT_VARIABLE OpenRDK_VERSION          OUTPUT_STRIP_TRAILING_WHITESPACE)
EXECUTE_PROCESS(COMMAND rdk-config --arch             OUTPUT_VARIABLE OpenRDK_ARCH             OUTPUT_STRIP_TRAILING_WHITESPACE)

SET(PROJECT_LIBRARY_OUTPUT_PATH "${OpenRDK_OUTPUT_TREE}/libext")
STRING(REGEX REPLACE "/src$" "" PROJECT_ROOT ${CMAKE_CURRENT_SOURCE_DIR})

SET(OPENRDK_FOUND ON CACHE INTERNAL "Whether the OpenRDK library found")

# Cross Compiling
# This weird set is automatically expanded
SET(CMAKE_CROSSCOMPILING @CMAKE_CROSSCOMPILING@)

SET(OpenRDK_CMAKE_MODULE_PATH @OpenRDK_CMAKE_MODULE_PATH@)
	IF("${OpenRDK_ARCH}" STREQUAL "geode")
		INCLUDE("${OpenRDK_CMAKE_MODULE_PATH}/Toolchain-geode.cmake")
	ELSEIF("${OpenRDK_ARCH}" STREQUAL "arm9")
		INCLUDE("${OpenRDK_CMAKE_MODULE_PATH}/Toolchain-arm9.cmake")
	ENDIF("${OpenRDK_ARCH}" STREQUAL "geode")
	INCLUDE(${OpenRDK_CMAKE_MODULE_PATH}/os.cmake)
SET(PROJECT_ARCH ${OpenRDK_ARCH})

INCLUDE(${OpenRDK_CMAKE_MODULE_PATH}/utils.cmake)

SET(COMPILE_NAO_SECTIONS @COMPILE_NAO_SECTIONS@)
SET(COMPILE_USARSIM_SECTIONS @COMPILE_USARSIM_SECTIONS@)

ADD_DEFINITIONS(${RDKCORE_DEFINITIONS})

@FINDOPENRDK_LIBRARIES_SECTION@

INCLUDE(${OpenRDK_CMAKE_MODULE_PATH}/prettymessage.cmake)
