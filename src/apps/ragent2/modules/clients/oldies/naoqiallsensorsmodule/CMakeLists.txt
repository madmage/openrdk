EXEC_PROGRAM(${CMAKE_CXX_COMPILER} ARGS --version OUTPUT_VARIABLE _NaoQi_COMPILER_VERSION)
STRING(REGEX REPLACE ".*([0-9])\\.([0-9])\\.[0-9].*" "\\1\\2" _NaoQi_COMPILER_VERSION ${_NaoQi_COMPILER_VERSION})

IF("${NaoQi_VERSION}" STREQUAL "1.2.0" AND "${_NaoQi_COMPILER_VERSION}" STREQUAL "44" )
	MESSAGE(STATUS "NaoQi SDK 1.2.0 is incompatible with ${CMAKE_CXX_COMPILER} 4.4.X, disabling ${CMAKE_CURRENT_SOURCE_DIR}")
ELSE("${NaoQi_VERSION}" STREQUAL "1.2.0" AND "${_NaoQi_COMPILER_VERSION}" STREQUAL "44" )

IF(COMPILE_NAO_SECTIONS)
	IF(ALDEBARAN_FOUND)
		RDK_ADD_RAGENT_MODULE(ALL_FILES)
		INCLUDE_DIRECTORIES(${ALDEBARAN_INCLUDE_DIR})
		LINK_DIRECTORIES(${ALDEBARAN_LINK_DIRECTORIES})
		TARGET_LINK_LIBRARIES(${RDK_THIS_MODULE_NAME} ${ALDEBARAN_LIBRARIES};rdk_nao)
	ELSE(ALDEBARAN_FOUND)
		MESSAGE(STATUS "WARNING: You requested to compile Nao sections, but you do not have Aldebaran libraries on your system (or you didn't set AL_DIR, NAO_CROSS_COMPIL_DIR, NAO_CROSS_COMPIL_ADDONS_DIR variables): DemoVisionNaoQiModule will not be compiled")
	ENDIF(ALDEBARAN_FOUND)
ENDIF(COMPILE_NAO_SECTIONS)

ENDIF("${NaoQi_VERSION}" STREQUAL "1.2.0" AND "${_NaoQi_COMPILER_VERSION}" STREQUAL "44" )
